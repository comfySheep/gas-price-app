(this["webpackJsonpgas-price-app"]=this["webpackJsonpgas-price-app"]||[]).push([[0],{38:function(e,t,a){e.exports=a(66)},64:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(17),c=a.n(r),o=a(7),s=a(35),l=a(68),d=a(6),p=Object(d.a)({basename:""}),u=a(2),m=a(10),g=a(11),h=a(13),v=a(12),f=a(9),y=a(14),E="rfej9napna.json",b="//logo.clearbit.com",S=[{key:"distance",name:"Distance"},{key:"price",name:"Price"}],_=["1","3","5","10","50","100000"],O=a(20),j=a.n(O),N=function(e){return function(e){var t=e.method,a=void 0===t?"get":t,n=e.params,i=e.url,r=e.headers;switch(a.toLowerCase()){case"get":return j.a.get(i,{params:n,headers:r});default:return j()(e)}}(e).then((function(e){var t=e.data;return Promise.resolve(t)})).catch((function(e){var t=e.response.data;return Promise.reject(t)}))},D=function(e){p.push("/gas-price-app/station/".concat(e))},w=E;var L="UPDATE_GAS_STATION_DETAIL",k="UPDATE_GAS_STATION_LIST",B="UPDATE_LOADING",T=function(e){var t=e.loading;return i.a.createElement("div",{id:"loading",className:"".concat(t?"":"hidden")})},G=S,M=_,I=function(){p.push("/gas-price-app")},U=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(h.a)(this,Object(v.a)(t).call(this))).UNSAFE_componentWillMount=function(){var t=e.props.location;(t?t.pathname:"").includes("station")||e.handleSearchStations()},e.handleUpdateSortBy=function(t){var a=t.target.value;e.setState({sortBy:a}),e.handleSearchStations()},e.handleUpdateSearchDistance=function(t){var a=t.target.value;e.setState({searchDistance:a}),e.handleSearchStations()},e.handleSearchStations=function(){navigator.geolocation.getCurrentPosition(e.handleGetGasStationList,(function(){}))},e.handleGetGasStationList=function(t){var a=e.props.getGasStationList,n=e.state,i=n.sortBy,r=n.searchDistance,c=t&&t.coords||{latitude:32.9596,longitude:-117.1578},o=c.latitude,s=c.longitude;a({latitude:o.toFixed(3),longitude:s.toFixed(3),distance:r,fuelType:"reg",sortBy:i}),I()},e.state={sortBy:"distance",searchDistance:"1"},e.handleUpdateSortBy=e.handleUpdateSortBy.bind(Object(f.a)(e)),e.handleUpdateSearchDistance=e.handleUpdateSearchDistance.bind(Object(f.a)(e)),e}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props.loading,a=this.state,r=a.sortBy,c=a.searchDistance;return i.a.createElement(n.Fragment,null,i.a.createElement("div",{id:"search-layout"},i.a.createElement("div",{id:"sort-buttons-container"},i.a.createElement("span",null,"Sort By: "),G.map((function(t){var a=t.key,n=t.name;return i.a.createElement("button",{className:"".concat(r===a?"btn active":"btn"),key:"search-sort-option-".concat(a),value:a,onClick:e.handleUpdateSortBy},n)}))),i.a.createElement("div",{id:"distance-buttons-container"},i.a.createElement("span",null,"Within: "),M.map((function(t){return i.a.createElement("button",{className:"".concat(c===t?"btn active":"btn"),key:"search-distance-option-".concat(t),value:t,onClick:e.handleUpdateSearchDistance},t," ","1"===t?"mile":"miles")})))),i.a.createElement(T,{loading:t}),i.a.createElement("div",{id:"search-content-container",className:"".concat(t?"hidden search-content-container":"search-content-container")},this.props.children))}}]),t}(n.Component),A={getGasStationList:function(e){return function(t){t({type:B,payload:{loading:!0}}),function(e){var t=e.latitude,a=e.longitude,n=e.distance,i=e.fuelType,r=e.sortBy;return N({url:"/stations/radius/".concat(t,"/").concat(a,"/").concat(n,"/").concat(i,"/").concat(r,"/").concat(w),method:"get"})}(e).then((function(a){"object"!==typeof a&&(a=JSON.parse(a.substring(a.indexOf('{"status":{"error":'))));var n=e.sortBy,i=a.stations;if("price"===n){var r=0;for(var c in i){var o=i[c];if(!isNaN(Number(o.reg_price))){r=c;break}}i=i.slice(r)}t({type:k,payload:{gasStationList:i}}),t({type:B,payload:{loading:!1}})})).catch((function(e){var a=(e&&e.Status||{}).message;alert(a),t({type:B,payload:{loading:!1}})}))}}},C=Object(o.b)((function(e){var t=e.app;return Object(u.a)({},t)}),A)(U),P=D,x=b,z=function(e){var t=e.gasStation,a=t.id,r=t.station,c=t.address,o=t.zip,s=t.reg_price,l=t.mid_price,d=t.pre_price,p=t.diesel_price,u=t.distance;return i.a.createElement("div",{className:"generic-row",onClick:function(){return P(a)}},r?i.a.createElement(n.Fragment,null,i.a.createElement("img",{src:"".concat(x,"/").concat(r,".com"),onError:function(e){return e.target.style.display="none"},alt:"logo-".concat(r)}),i.a.createElement("div",{className:"station_name"},r)):null,i.a.createElement("div",{className:"station-address"},c,", ",o),i.a.createElement("div",{className:"station-price station-reg-price"},"Regular - ",s),i.a.createElement("div",{className:"station-price station-mid-price"},"Medium - ",l),i.a.createElement("div",{className:"station-price station-pre-price"},"Premium - ",d),i.a.createElement("div",{className:"station-price station-diesel-price"},"Diesel - ",p),i.a.createElement("div",{className:"station-distance"},"Distance - ",u))},F=function(e){var t=e.gasStationList;return 0===t.length?"There are no gas station near you...":i.a.createElement("div",{className:"station-list"},t.map((function(e){return i.a.createElement(z,Object.assign({key:e.id},{gasStation:e}))})))},W=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.gasStationList;return i.a.createElement("div",{id:"gas-station-list"},i.a.createElement(F,{gasStationList:e}))}}]),t}(n.Component),J=Object(o.b)((function(e){var t=e.gasStationList;return Object(u.a)({},t)}),{})(W),R=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(i)))).componentDidMount=function(){var e=a.props.match.params.stationId;e&&a.handleGetGasStationDetail(e)},a.handleGetGasStationDetail=function(e){(0,a.props.getGasStationDetail)({stationId:e})},a.renderLocationToMap=function(e){a.loadScript("https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyCQMfTi3tCDb9SvQewB2v0OWgVyWzkFn9k","&callback=initMap")),window.initMap=a.initMap.bind(Object(f.a)(a),e)},a.loadScript=function(e){var t=document.getElementsByTagName("script")[0],a=document.createElement("script");a.src=e,a.async=!0,a.defer=!0,t.parentNode.appendChild(a)},a.initMap=function(e){var t=e.lat,a=e.lng,n=new window.google.maps.Map(document.getElementById("map")),i=new window.google.maps.LatLngBounds,r=new window.google.maps.Marker({position:new window.google.maps.LatLng(t,a),map:n});i.extend(r.position),n.fitBounds(i)},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.gasStationDetail,t=e.station_name,a=e.address,n=e.zip,r=e.reg_price,c=e.reg_date,o=e.mid_price,s=e.mid_date,l=e.pre_price,d=e.pre_date,p=e.diesel_price,u=e.diesel_date,m=e.lat,g=e.lng;if(m&&g){var h={lat:m,lng:g};this.renderLocationToMap(h)}return i.a.createElement("div",{id:"gas-station-detail"},i.a.createElement("div",{id:"map"}),i.a.createElement("div",{className:"station_name"},t),i.a.createElement("div",{className:"station-address"},a,", ",n),i.a.createElement("div",{className:"station-price station-reg-price"},"Regular - ",r),i.a.createElement("div",{className:"station-price-date station-reg-price-date"},c),i.a.createElement("div",{className:"station-price station-mid-price"},"Medium - ",o),i.a.createElement("div",{className:"station-price-date station-mid-price-date"},s),i.a.createElement("div",{className:"station-price station-pre-price"},"Premium - ",l),i.a.createElement("div",{className:"station-price-date station-pre-price-date"},d),i.a.createElement("div",{className:"station-price station-diesel-price"},"Diesel - ",p),i.a.createElement("div",{className:"station-price-date station-diesel-price-date"},u))}}]),t}(n.Component),Q={getGasStationDetail:function(e){return function(t){t({type:B,payload:{loading:!0}}),function(e){var t=e.stationId;return N({url:"/stations/details/".concat(t,"/").concat(w),method:"get"})}(e).then((function(e){var a=e.details;t({type:L,payload:Object(u.a)({},a)}),t({type:B,payload:{loading:!1}})})).catch((function(e){var a=(e&&e.Status||{}).message;alert(a),t({type:B,payload:{loading:!1}})}))}}},V=Object(o.b)((function(e){var t=e.gasStationDetail;return Object(u.a)({},t)}),Q)(R),X=(a(64),function(e){var t=e.page,a=e.layout,n=Object(s.a)(e,["page","layout"]);return i.a.createElement(l.a,Object.assign({},n,{render:function(e){return i.a.createElement(a,e,i.a.createElement(t,e))}}))});var q=function(){return i.a.createElement(l.b,{history:p},i.a.createElement(l.c,null,i.a.createElement(X,{exact:!0,path:"/gas-price-app",layout:C,page:J}),i.a.createElement(X,{path:"/gas-price-app/station/:stationId",layout:C,page:V})))},H=a(8),K=a(37),Y={loading:!1},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case B:var i=n.loading;return Object(u.a)({},e,{loading:i});default:return e}},$={gasStationDetail:{}},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case L:var i={address:n.address,city:n.city,region:n.region,country:n.country,lat:n.lat,lng:n.lng,station_name:n.station_name,zip:n.zip,reg_price:n.reg_price,reg_date:n.reg_date,mid_price:n.mid_price,mid_date:n.mid_date,pre_price:n.pre_price,pre_date:n.pre_date,diesel_price:n.diesel_price,diesel_date:n.diesel_date};return Object(u.a)({},e,{gasStationDetail:i});default:return e}},te={gasStationList:[]},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case k:return Object(u.a)({},e,{gasStationList:n.gasStationList});default:return e}},ne=Object(H.c)({app:Z,gasStationDetail:ee,gasStationList:ae}),ie=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||H.d,re=Object(H.e)(ne,ie(Object(H.a)(K.a)));c.a.render(i.a.createElement(o.a,{store:re},i.a.createElement(q,null)),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.19978878.chunk.js.map