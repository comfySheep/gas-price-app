(this["webpackJsonpgas-price-app"]=this["webpackJsonpgas-price-app"]||[]).push([[0],{38:function(t,e,a){t.exports=a(66)},64:function(t,e,a){},66:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),r=a(17),c=a.n(r),o=a(7),s=a(35),l=a(68),d=a(6),u=Object(d.a)({basename:""}),p=a(2),m=a(9),g=a(10),h=a(12),v=a(11),f=a(16),y=a(13),S="rfej9napna.json",b=[{key:"distance",name:"Distance"},{key:"price",name:"Price"}],E=[1,3,5,10,50],O=a(20),j=a.n(O),_=function(t){return function(t){var e=t.method,a=void 0===e?"get":e,n=t.params,i=t.url,r=t.headers;switch(a.toLowerCase()){case"get":return j.a.get(i,{params:n,headers:r});default:return j()(t)}}(t).then((function(t){var e=t.data;return Promise.resolve(e)})).catch((function(t){var e=t.response.data;return Promise.reject(e)}))},D=function(t){u.push("/gas-price-app/station/".concat(t))},N=S;var L="UPDATE_GAS_STATION_DETAIL",G="UPDATE_GAS_STATION_LIST",k="UPDATE_LOADING",T=function(){return i.a.createElement("div",{id:"loading"},"Loading...")},U=b,P=E,A=function(){u.push("/gas-price-app")},w=function(t){function e(){var t;return Object(m.a)(this,e),(t=Object(h.a)(this,Object(v.a)(e).call(this))).UNSAFE_componentWillMount=function(){var e=t.props.location;(e?e.pathname:"").includes("station")||t.handleSearchStations()},t.handleUpdateSortBy=function(e){var a=e.target.value;t.setState({sortBy:a}),t.handleSearchStations()},t.handleUpdateSearchDistance=function(e){var a=e.target.value;t.setState({searchDistance:a}),t.handleSearchStations()},t.handleSearchStations=function(){navigator.geolocation.getCurrentPosition(t.handleGetGasStationList,(function(){}))},t.handleGetGasStationList=function(e){var a=t.props.getGasStationList,n=t.state,i=n.sortBy,r=n.searchDistance,c=e&&e.coords||{latitude:32.9596,longitude:-117.1578},o=c.latitude,s=c.longitude;a({latitude:o.toFixed(3),longitude:s.toFixed(3),distance:r,fuelType:"reg",sortBy:i}),A()},t.state={sortBy:"distance",searchDistance:1},t.handleUpdateSortBy=t.handleUpdateSortBy.bind(Object(f.a)(t)),t.handleUpdateSearchDistance=t.handleUpdateSearchDistance.bind(Object(f.a)(t)),t}return Object(y.a)(e,t),Object(g.a)(e,[{key:"render",value:function(){var t=this,e=this.props.loading;return i.a.createElement(n.Fragment,null,i.a.createElement("div",{id:"search-layout"},i.a.createElement("div",{id:"sort-buttons-container"},i.a.createElement("span",null,"Sort By: "),U.map((function(e){var a=e.key,n=e.name;return i.a.createElement("button",{className:"btn",key:"search-sort-option-".concat(a),value:a,onClick:t.handleUpdateSortBy},n)}))),i.a.createElement("div",{id:"distance-buttons-container"},i.a.createElement("span",null,"Within: "),P.map((function(e){return i.a.createElement("button",{className:"btn",key:"search-distance-option-".concat(e),value:e,onClick:t.handleUpdateSearchDistance},e," ",1===e?"mile":"miles")})))),e?i.a.createElement(T,null):null,i.a.createElement("div",{id:"search-content-container",className:"".concat(e?"hidden ":"","search-content-container")},this.props.children))}}]),e}(n.Component),B={getGasStationList:function(t){return function(e){e({type:k,payload:{loading:!0}}),function(t){var e=t.latitude,a=t.longitude,n=t.distance,i=t.fuelType,r=t.sortBy;return _({url:"/stations/radius/".concat(e,"/").concat(a,"/").concat(n,"/").concat(i,"/").concat(r,"/").concat(N),method:"get"})}(t).then((function(t){"object"!==typeof t&&(t=JSON.parse(t.substring(t.indexOf('{"status":{"error":'))));var a=t.stations;e({type:G,payload:{gasStationList:a}}),e({type:k,payload:{loading:!1}})})).catch((function(t){}))}}},I=Object(o.b)((function(t){var e=t.app;return Object(p.a)({},e)}),B)(w),C=function(t){var e=t.gasStation,a=e.id,n=e.station,r=e.address,c=e.zip,o=e.reg_price,s=e.mid_price,l=e.pre_price,d=e.diesel_price,u=e.distance;return i.a.createElement("div",{className:"generic-row",onClick:function(){return D(a)}},i.a.createElement("div",{className:"station-title"},n),i.a.createElement("div",{className:"station-address"},r,", ",c),i.a.createElement("div",{className:"station-price station-reg-price"},"Regular - ",o),i.a.createElement("div",{className:"station-price station-mid-price"},"Medium - ",s),i.a.createElement("div",{className:"station-price station-pre-price"},"Premium - ",l),i.a.createElement("div",{className:"station-price station-diesel-price"},"Diesel - ",d),i.a.createElement("div",{className:"station-distance"},"Distance - ",u))},x=function(t){var e=t.gasStationList;return 0===e.length?"There are no gas station near you...":i.a.createElement("div",{className:"station-list"},e.map((function(t){return i.a.createElement(C,Object.assign({key:t.id},{gasStation:t}))})))},F=function(t){function e(){return Object(m.a)(this,e),Object(h.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(y.a)(e,t),Object(g.a)(e,[{key:"render",value:function(){var t=this.props.gasStationList;return i.a.createElement("div",{id:"gas-station-list"},i.a.createElement(x,{gasStationList:t}))}}]),e}(n.Component),M=Object(o.b)((function(t){var e=t.gasStationList;return Object(p.a)({},e)}),{})(F),z=function(t){function e(){var t,a;Object(m.a)(this,e);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(h.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(i)))).UNSAFE_componentWillMount=function(){},a.componentDidMount=function(){var t=a.props.match.params.stationId;t&&a.handleGetGasStationDetail(t)},a.handleGetGasStationDetail=function(t){(0,a.props.getGasStationDetail)({stationId:t})},a}return Object(y.a)(e,t),Object(g.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{id:"gas-station-detail"},"Gas Station Detail")}}]),e}(n.Component),J={getGasStationDetail:function(t){return function(e){e({type:k,payload:{loading:!0}}),function(t){var e=t.stationId;return _({url:"/stations/details/".concat(e,"/").concat(N),method:"get"})}(t).then((function(t){var a=t.details,n=t.previousPrices;e({type:L,payload:Object(p.a)({},a,{previousPrices:n})}),e({type:k,payload:{loading:!1}})})).catch((function(t){}))}}},W=Object(o.b)((function(t){var e=t.gasStationDetail;return Object(p.a)({},e)}),J)(z),R=(a(64),function(t){var e=t.page,a=t.layout,n=Object(s.a)(t,["page","layout"]);return i.a.createElement(l.a,Object.assign({},n,{render:function(t){return i.a.createElement(a,t,i.a.createElement(e,t))}}))});var X=function(){return i.a.createElement(l.b,{history:u},i.a.createElement(l.c,null,i.a.createElement(R,{exact:!0,path:"/gas-price-app",layout:I,page:M}),i.a.createElement(R,{path:"/gas-price-app/station/:stationId",layout:I,page:W})))},V=a(8),q=a(37),H={loading:!1},K=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,e=arguments.length>1?arguments[1]:void 0,a=e.type,n=e.payload;switch(a){case k:var i=n.loading;return Object(p.a)({},t,{loading:i});default:return t}},Q={gasStationDetail:{}},Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,e=arguments.length>1?arguments[1]:void 0,a=e.type,n=e.payload;switch(a){case L:var i={address:n.address,city:n.city,region:n.region,country:n.country,lat:n.lat,lng:n.lng,station_name:n.station_name,zip:n.zip,reg_price:n.reg_price,reg_date:n.reg_date,mid_price:n.mid_price,mid_date:n.mid_date,pre_price:n.pre_price,pre_date:n.pre_date,diesel_price:n.diesel_price,diesel_date:n.diesel_date,previousPrices:n.previousPrices};return Object(p.a)({},t,{gasStationDetail:i});default:return t}},Z={gasStationList:[]},$=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,e=arguments.length>1?arguments[1]:void 0,a=e.type,n=e.payload;switch(a){case G:return Object(p.a)({},t,{gasStationList:n.gasStationList});default:return t}},tt=Object(V.c)({app:K,gasStationDetail:Y,gasStationList:$}),et=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||V.d,at=Object(V.e)(tt,et(Object(V.a)(q.a)));c.a.render(i.a.createElement(o.a,{store:at},i.a.createElement(X,null)),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.41a8e5b3.chunk.js.map